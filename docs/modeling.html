

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>ModelingAccessor (mdl) &mdash; demographic-modeling-module 0.3.0 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="modeling.utils module" href="modeling.utils.html" />
    <link rel="prev" title="Demographic Modeling - Installation" href="install.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> demographic-modeling-module
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation and Configuration</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">ModelingAccessor (<code class="docutils literal notranslate"><span class="pre">mdl</span></code>)</a></li>
<li class="toctree-l1"><a class="reference internal" href="#business">Business</a></li>
<li class="toctree-l1"><a class="reference internal" href="#proximity">Proximity</a></li>
<li class="toctree-l1"><a class="reference internal" href="#country">Country</a></li>
<li class="toctree-l1"><a class="reference internal" href="modeling.utils.html">modeling.utils module</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">demographic-modeling-module</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>ModelingAccessor (<code class="docutils literal notranslate"><span class="pre">mdl</span></code>)</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/modeling.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="modelingaccessor-mdl">
<h1>ModelingAccessor (<code class="docutils literal notranslate"><span class="pre">mdl</span></code>)<a class="headerlink" href="#modelingaccessor-mdl" title="Permalink to this headline">¶</a></h1>
<p>The ModelingAccessor object (<code class="docutils literal notranslate"><span class="pre">df.mdl</span></code>), a Pandas DataFrame Accessor, likely is
going to be one of the most often used objects in this package. The
ModelingAccessor object is rarely, if ever, created directly. Rather,
it is accessed as a property of a Spatially Enabled DataFrame.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dm</span> <span class="kn">import</span> <span class="n">Country</span>

<span class="c1"># start by creating a country object instance</span>
<span class="n">usa</span> <span class="o">=</span> <span class="n">Country</span><span class="p">(</span><span class="s1">&#39;USA&#39;</span><span class="p">)</span>

<span class="c1"># get a geography to work with from locally installed data</span>
<span class="n">aoi_df</span> <span class="o">=</span> <span class="n">usa</span><span class="o">.</span><span class="n">cbsas</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;seattle&#39;</span><span class="p">)</span>

<span class="c1"># use the DemographicModeling accessor to get block groups in the AOI</span>
<span class="n">bg_df</span> <span class="o">=</span> <span class="n">aoi_df</span><span class="o">.</span><span class="n">block_groups</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>

<span class="c1"># get current year key variables for enrichment</span>
<span class="n">e_vars</span> <span class="o">=</span> <span class="n">cntry</span><span class="o">.</span><span class="n">enrich_variables</span>
<span class="n">key_vars</span> <span class="o">=</span> <span class="n">e_vars</span><span class="p">[</span>
    <span class="p">(</span><span class="n">e_vars</span><span class="o">.</span><span class="n">data_collection</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;Key&#39;</span><span class="p">))</span>
    <span class="o">&amp;</span> <span class="p">(</span><span class="n">e_vars</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;CY&#39;</span><span class="p">))</span>
<span class="p">]</span>

<span class="c1"># use the DemographicModeling accessor to now enrich the block groups</span>
<span class="n">enrich_df</span> <span class="o">=</span> <span class="n">ta_df</span><span class="o">.</span><span class="n">mdl</span><span class="o">.</span><span class="n">enrich</span><span class="p">(</span><span class="n">key_vars</span><span class="p">)</span>
</pre></div>
</div>
<dl class="py class">
<dt id="modeling.ModelingAccessor">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">modeling.</span></code><code class="sig-name descname"><span class="pre">ModelingAccessor</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#modeling.ModelingAccessor" title="Permalink to this definition">¶</a></dt>
<dd><p>The ModelingAccessor is a Pandas DataFrame accessor, a standalone namespace for
accessing geographic modeling functionality. If the DataFrame was created using
a Country object, then the Modeling (<code class="docutils literal notranslate"><span class="pre">mdl</span></code>) namespace will automatically
be available. However, if you want to use this functionality, and have not created
the DataFrame using the Country object, you must import arcgis.modeling.Modeling
to have this functionality available.</p>
<dl class="py method">
<dt id="modeling.ModelingAccessor.enrich">
<code class="sig-name descname"><span class="pre">enrich</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">enrich_variables</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">country</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#modeling.ModelingAccessor.enrich" title="Permalink to this definition">¶</a></dt>
<dd><p>Enrich the DataFrame using the provided enrich variable list.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>enrich_variables</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">array</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>, <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>]) – List of data variables for enrichment. This can optionally
be a filtered subset of the dataframe property of an instance
of the Country object.</p></li>
<li><p><strong>country</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Country</span></code>]) – Optional
Country object instance. This must be included if the parent
dataframe was not created using this package’s standard
geography methods, or if the enrichment variables are not
defined by passing in an enrich variables dataframe created
using this package’s introspection methods.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>pd.DataFrame with enriched data.</p>
</dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>

<span class="kn">from</span> <span class="nn">arcgis</span> <span class="kn">import</span> <span class="n">GeoAccessor</span>
<span class="kn">from</span> <span class="nn">dm</span> <span class="kn">import</span> <span class="n">Country</span><span class="p">,</span> <span class="n">DemographicModeling</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="c1"># get a path to the trade area data</span>
<span class="n">prj_pth</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span>
<span class="n">gdb_pth</span> <span class="o">=</span> <span class="n">dir_data</span><span class="o">/</span><span class="s1">&#39;data.gdb&#39;</span>
<span class="n">fc_pth</span> <span class="o">=</span> <span class="n">gdb</span><span class="o">/</span><span class="s1">&#39;trade_areas&#39;</span>

<span class="c1"># load the trade areas into a Spatially Enabled DataFrame</span>
<span class="n">ta_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">spatial</span><span class="o">.</span><span class="n">from_featureclass</span><span class="p">(</span><span class="n">fc_pth</span><span class="p">)</span>

<span class="c1"># create a country object instance</span>
<span class="n">usa</span> <span class="o">=</span> <span class="n">Country</span><span class="p">(</span><span class="s1">&#39;USA&#39;</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="s1">&#39;local&#39;</span><span class="p">)</span>

<span class="c1"># get all the available enrichment variables</span>
<span class="n">e_vars</span> <span class="o">=</span> <span class="n">usa</span><span class="o">.</span><span class="n">enrich_variables</span>

<span class="c1"># filter to just the current year key variables</span>
<span class="n">key_vars</span> <span class="o">=</span> <span class="n">e_vars</span><span class="p">[(</span><span class="n">e_vars</span><span class="o">.</span><span class="n">data_collection</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;Key&#39;</span><span class="p">))</span> <span class="o">&amp;</span>
                  <span class="p">(</span><span class="n">e_vars</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;CY&#39;</span><span class="p">))]</span>

<span class="c1"># enrich the Spatially Enabled DataFrame</span>
<span class="n">ta_df</span> <span class="o">=</span> <span class="n">ta_df</span><span class="o">.</span><span class="n">dm</span><span class="o">.</span><span class="n">enrich</span><span class="p">(</span><span class="n">key_vars</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="modeling.ModelingAccessor.get_nearest">
<code class="sig-name descname"><span class="pre">get_nearest</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">destination_dataframe</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">single_row_per_origin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">origin_id_column</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'LOCNUM'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">destination_id_column</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'LOCNUM'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">destination_count</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">4</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">near_prefix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">destination_columns_to_keep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#modeling.ModelingAccessor.get_nearest" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a closest destination dataframe using a destination Spatially Enabled
Dataframe relative to the parent Spatially enabled DataFrame, but keep each
origin and destination still in a discrete row instead of collapsing to a
single row per origin. The main reason to use this is if needing the geometry
for visualization.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>destination_dataframe</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>) – Destination points in one of the supported input formats.</p></li>
<li><p><strong>source</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Path</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Country</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">GIS</span></code>, <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>]) – Optional - Either the path to the network dataset, the Country object
associated with the Business Analyst source being used, or a GIS object
instance. If invoked from a dataframe created for a country’s standard
geography levels using the dm accessor, get_nearest will use the parent
country properties to ascertain how to perform the networks solve.</p></li>
<li><p><strong>single_row_per_origin</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – Optional - Whether or not to pivot the results to return
only one row for each origin location. Default is True.</p></li>
<li><p><strong>origin_id_column</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – Optional - Column in the origin points Spatially Enabled Dataframe
uniquely identifying each feature. Default is ‘LOCNUM’.</p></li>
<li><p><strong>destination_id_column</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – Column in the destination points Spatially Enabled Dataframe
uniquely identifying each feature</p></li>
<li><p><strong>destination_count</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>) – Integer number of destinations to search for from every origin
point.</p></li>
<li><p><strong>near_prefix</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – String prefix to prepend onto near column names in the output.</p></li>
<li><p><strong>destination_columns_to_keep</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>]) – List of columns to keep in the output. Commonly, if
businesses, this includes the column with the business names.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Spatially Enabled Dataframe with a row for each origin id, and metrics for
each nth destinations.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="modeling.ModelingAccessor.level">
<code class="sig-name descname"><span class="pre">level</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">geographic_level</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#modeling.ModelingAccessor.level" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a Spatially Enabled DataFrame of geometries corresponding
to the index returned by the Country.geography_levels property. This is
most useful when retrieving the lowest, most granular, level of
geography within a country.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>geographic_level</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>) – Integer referencing the index of the geographic level desired.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">GeographyLevel</span></code></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>GeographyLevel object instance</p>
</dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dm</span> <span class="kn">import</span> <span class="n">Country</span>

<span class="c1"># create an instance of the country object</span>
<span class="n">cntry</span> <span class="o">=</span> <span class="n">Country</span><span class="p">(</span><span class="s1">&#39;USA&#39;</span><span class="p">)</span>

<span class="c1"># the get function returns a dataframe with the &#39;dm&#39; property</span>
<span class="n">metro_df</span> <span class="o">=</span> <span class="n">cntry</span><span class="o">.</span><span class="n">cbsas</span><span class="p">(</span><span class="s1">&#39;seattle&#39;</span><span class="p">)</span>

<span class="c1"># level returns a CountryLevel object enabling getting all geography_levels</span>
<span class="c1"># falling within the parent dataframe</span>
<span class="n">lvl_df</span> <span class="o">=</span> <span class="n">metro_df</span><span class="o">.</span><span class="n">mdl</span><span class="o">.</span><span class="n">level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="modeling.ModelingAccessor.project">
<code class="sig-name descname"><span class="pre">project</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">output_spatial_reference</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">4326</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#modeling.ModelingAccessor.project" title="Permalink to this definition">¶</a></dt>
<dd><p>Project to a new spatial reference, applying an applicable transformation if necessary.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>output_spatial_reference</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<code class="xref py py-class docutils literal notranslate"><span class="pre">SpatialReference</span></code>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>]) – Optional - The output spatial reference. Default is 4326 (WGS84).</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Spatially Enabled DataFrame projected to the new spatial reference.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="business">
<h1>Business<a class="headerlink" href="#business" title="Permalink to this headline">¶</a></h1>
<dl class="py class">
<dt id="modeling.Business">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">modeling.</span></code><code class="sig-name descname"><span class="pre">Business</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mdl</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#modeling.Business" title="Permalink to this definition">¶</a></dt>
<dd><p>Just like it sounds, this is a way to search for and find
businesses of your own brand for analysis, but more importantly
competitor locations facilitating modeling the effects of
competition as well. The business object is accessed as a property
of the ModelingAccessor (<code class="docutils literal notranslate"><span class="pre">df.mdl.business</span></code>).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">modeling</span> <span class="kn">import</span> <span class="n">Country</span>

<span class="c1"># start by creating a country object instance</span>
<span class="n">usa</span> <span class="o">=</span> <span class="n">Country</span><span class="p">(</span><span class="s1">&#39;USA&#39;</span><span class="p">)</span>

<span class="c1"># get a geography to work with from locally installed data</span>
<span class="n">aoi_df</span> <span class="o">=</span> <span class="n">usa</span><span class="o">.</span><span class="n">cbsas</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;Seattle&#39;</span><span class="p">)</span>

<span class="c1"># get all Ace Hardware locations</span>
<span class="n">brnd_df</span> <span class="o">=</span> <span class="n">aoi_df</span><span class="o">.</span><span class="n">mdl</span><span class="o">.</span><span class="n">business</span><span class="o">.</span><span class="n">get_by_name</span><span class="p">(</span><span class="s1">&#39;Ace Hardware&#39;</span><span class="p">)</span>

<span class="c1"># get all competitors for Ace Hardware in Seattle using the</span>
<span class="c1"># template of the brand dataframe</span>
<span class="n">comp_df</span> <span class="o">=</span> <span class="n">aoi_df</span><span class="o">.</span><span class="n">mdl</span><span class="o">.</span><span class="n">business</span><span class="o">.</span><span class="n">get_competition</span><span class="p">(</span><span class="n">brnd_df</span><span class="p">)</span>

<span class="c1"># ...or get competitors by using the same search term</span>
<span class="n">comp_df</span> <span class="o">=</span> <span class="n">aoi_df</span><span class="o">.</span><span class="n">mdl</span><span class="o">.</span><span class="n">business</span><span class="o">.</span><span class="n">get_competition</span><span class="p">(</span><span class="s1">&#39;Ace Hardware&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="py method">
<dt id="modeling.Business.calculate_brand_name_category">
<code class="sig-name descname"><span class="pre">calculate_brand_name_category</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">local_threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inplace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#modeling.Business.calculate_brand_name_category" title="Permalink to this definition">¶</a></dt>
<dd><p>For the output of any Business.get* function, calculate a column named ‘brand_name_category’. This function is
frequently used to re-calculate the category identifying unique local retailers, and group them collectively
into a ‘local_brand’. This is useful in markets where there is a distinct preference for local retailers. This
is particularly true for speciality coffee shops in many urban markets. While this is performed
automatically for the ‘get_by_code’ and ‘get_competitors’ methods, this function enables you to recalculate it
if you need to massage some of the brand name outputs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>local_threshold</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>) – Integer count below which a brand name will be consider a local brand.</p></li>
<li><p><strong>inplace</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – Boolean indicating if the dataframe should be modified in place, or a new one created and returned.
The default is False to not inadvertently</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>]</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Pandas Spatially Enabled DataFrame of store locations with the updated column if inplace is False.
Otherwise, returns None.</p>
</dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">arcgis.gis</span> <span class="kn">import</span> <span class="n">GIS</span>
<span class="kn">from</span> <span class="nn">modeling</span> <span class="kn">import</span> <span class="n">Country</span>

<span class="c1"># connect to a Web GIS</span>
<span class="n">gis</span> <span class="o">=</span> <span class="n">GIS</span><span class="p">(</span><span class="s1">&#39;https://path.to.arcgis.enterprise.com/portal&#39;</span><span class="p">,</span>
          <span class="n">username</span><span class="o">=</span><span class="s1">&#39;batman&#39;</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s1">&#39;P3nnyw0rth!&#39;</span><span class="p">)</span>

<span class="c1"># create a country object instance</span>
<span class="n">cntry</span> <span class="o">=</span> <span class="n">Country</span><span class="p">(</span><span class="s1">&#39;USA&#39;</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">gis</span><span class="p">)</span>

<span class="c1"># create an area of interest</span>
<span class="n">aoi_df</span> <span class="o">=</span> <span class="n">cntry</span><span class="o">.</span><span class="n">cbsas</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;Seattle&#39;</span><span class="p">)</span>

<span class="c1"># use this area of interest to get brand locations</span>
<span class="n">brand_df</span> <span class="o">=</span> <span class="n">aoi_df</span><span class="o">.</span><span class="n">mdl</span><span class="o">.</span><span class="n">business</span><span class="o">.</span><span class="n">get_by_name</span><span class="p">(</span><span class="s1">&#39;Ace Hardware&#39;</span><span class="p">)</span>

<span class="c1"># get competitors and categorize all brands with less than</span>
<span class="c1"># three locations as a local brand</span>
<span class="n">comp_df</span> <span class="o">=</span> <span class="n">aoi_df</span><span class="o">.</span><span class="n">mdl</span><span class="o">.</span><span class="n">business</span><span class="o">.</span><span class="n">get_competition</span><span class="p">(</span><span class="n">brand_df</span><span class="p">,</span> <span class="n">local_threshold</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>

<span class="c1"># with hardware stores, each True Value has a unique name,</span>
<span class="c1"># so it helps to rename these to be correctly recognized</span>
<span class="c1"># as a brand of stores</span>
<span class="n">replace_lst</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="s1">&#39;TRUE VALUE|TRUE VL&#39;</span><span class="p">,</span> <span class="s1">&#39;TRUE VALUE&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;MC LENDON|MCLENDON&#39;</span><span class="p">,</span> <span class="s1">&#39;MCLENDON HARDWARE&#39;</span><span class="p">)</span>
<span class="p">]</span>
<span class="k">for</span> <span class="n">repl</span> <span class="ow">in</span> <span class="n">replace_lst</span><span class="p">:</span>
    <span class="n">brand_filter</span> <span class="o">=</span> <span class="n">comp_df</span><span class="o">.</span><span class="n">brand_name</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">repl</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">regex</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">comp_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">brand_filter</span><span class="p">,</span> <span class="s1">&#39;brand_name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">repl</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

<span class="c1"># now, with the True Values renamed, we need to recalculate which</span>
<span class="c1"># locations are actually local brands</span>
<span class="n">comp_df</span><span class="o">.</span><span class="n">mdl</span><span class="o">.</span><span class="n">business</span><span class="o">.</span><span class="n">calculate_brand_name_category</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>The output of <code class="docutils literal notranslate"><span class="pre">comp_df.head()</span></code> from the above sample looks similar to the following.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 2%" />
<col style="width: 4%" />
<col style="width: 11%" />
<col style="width: 6%" />
<col style="width: 3%" />
<col style="width: 2%" />
<col style="width: 4%" />
<col style="width: 3%" />
<col style="width: 3%" />
<col style="width: 3%" />
<col style="width: 3%" />
<col style="width: 2%" />
<col style="width: 3%" />
<col style="width: 30%" />
<col style="width: 5%" />
<col style="width: 9%" />
<col style="width: 8%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"></th>
<th class="head"><p>LOCNUM</p></th>
<th class="head"><p>CONAME</p></th>
<th class="head"><p>NAICSDESC</p></th>
<th class="head"><p>NAICS</p></th>
<th class="head"><p>SIC</p></th>
<th class="head"><p>SOURCE</p></th>
<th class="head"><p>PUBPRV</p></th>
<th class="head"><p>FRNCOD</p></th>
<th class="head"><p>ISCODE</p></th>
<th class="head"><p>CITY</p></th>
<th class="head"><p>ZIP</p></th>
<th class="head"><p>STATE</p></th>
<th class="head"><p>SHAPE</p></th>
<th class="head"><p>location_id</p></th>
<th class="head"><p>brand_name</p></th>
<th class="head"><p>brand_name_category</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0</p></td>
<td><p>002890986</p></td>
<td><p>MC LENDON HARDWARE</p></td>
<td><p>HARDWARE-RETAIL</p></td>
<td><p>44413005</p></td>
<td><p>525104</p></td>
<td><p>INFOGROUP</p></td>
<td></td>
<td></td>
<td></td>
<td><p>SUMNER</p></td>
<td><p>98390</p></td>
<td><p>WA</p></td>
<td><p>{‘x’: -122.242365, ‘y’: 47.2046040000001, ‘spatialReference’: {‘wkid’: 4326}}</p></td>
<td><p>002890986</p></td>
<td><p>MCLENDON HARDWARE</p></td>
<td><p>MCLENDON HARDWARE</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>006128854</p></td>
<td><p>MCLENDON HARDWARE INC</p></td>
<td><p>HARDWARE-RETAIL</p></td>
<td><p>44413005</p></td>
<td><p>525104</p></td>
<td><p>INFOGROUP</p></td>
<td></td>
<td></td>
<td></td>
<td><p>RENTON</p></td>
<td><p>98057</p></td>
<td><p>WA</p></td>
<td><p>{‘x’: -122.2140195, ‘y’: 47.477943, ‘spatialReference’: {‘wkid’: 4326}}</p></td>
<td><p>006128854</p></td>
<td><p>MCLENDON HARDWARE</p></td>
<td><p>MCLENDON HARDWARE</p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>174245191</p></td>
<td><p>DUVALL TRUE VALUE HARDWARE</p></td>
<td><p>HARDWARE-RETAIL</p></td>
<td><p>44413005</p></td>
<td><p>525104</p></td>
<td><p>INFOGROUP</p></td>
<td></td>
<td><p>2</p></td>
<td></td>
<td><p>DUVALL</p></td>
<td><p>98019</p></td>
<td><p>WA</p></td>
<td><p>{‘x’: -121.9853835, ‘y’: 47.738907, ‘spatialReference’: {‘wkid’: 4326}}</p></td>
<td><p>174245191</p></td>
<td><p>TRUE VALUE</p></td>
<td><p>TRUE VALUE</p></td>
</tr>
<tr class="row-odd"><td><p>3</p></td>
<td><p>174262691</p></td>
<td><p>GATEWAY TRUE VALUE HARDWARE</p></td>
<td><p>HARDWARE-RETAIL</p></td>
<td><p>44413005</p></td>
<td><p>525104</p></td>
<td><p>INFOGROUP</p></td>
<td></td>
<td><p>2</p></td>
<td></td>
<td><p>ENUMCLAW</p></td>
<td><p>98022</p></td>
<td><p>WA</p></td>
<td><p>{‘x’: -121.9876155, ‘y’: 47.2019940000001, ‘spatialReference’: {‘wkid’: 4326}}</p></td>
<td><p>174262691</p></td>
<td><p>TRUE VALUE</p></td>
<td><p>TRUE VALUE</p></td>
</tr>
<tr class="row-even"><td><p>4</p></td>
<td><p>174471722</p></td>
<td><p>TWEEDY &amp; POPP HARDWARE</p></td>
<td><p>HARDWARE-RETAIL</p></td>
<td><p>44413005</p></td>
<td><p>525104</p></td>
<td><p>INFOGROUP</p></td>
<td></td>
<td><p>2</p></td>
<td></td>
<td><p>SEATTLE</p></td>
<td><p>98103</p></td>
<td><p>WA</p></td>
<td><p>{‘x’: -122.3357134, ‘y’: 47.6612959300001, ‘spatialReference’: {‘wkid’: 4326}}</p></td>
<td><p>174471722</p></td>
<td><p>TWEEDY &amp; POPP HARDWARE</p></td>
<td><p>local_brand</p></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="py method">
<dt id="modeling.Business.drop_by_id">
<code class="sig-name descname"><span class="pre">drop_by_id</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">drop_dataframe</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source_id_column</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'location_id'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">drop_id_column</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'location_id'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#modeling.Business.drop_by_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Drop values from the parent dataframe based on unique identifiers found in another dataframe. This is a common
task when removing brand locations from a dataframe of all locations to create a dataframe of only competitors.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>drop_dataframe</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>) – Required Pandas DataFrame with a unique identifier column. Values in this column will be
used to identify and remove values from the dataframe.</p></li>
<li><p><strong>source_id_column</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – Optional string for the column in the original dataframe with values to be used for
identifying rows to either drop or retain. Default is ‘location_id’.</p></li>
<li><p><strong>drop_id_column</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – Optional string for the column in the drop dataframe with values to be used for identifying
rows to drop or retain. Default is ‘location_id’.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Pandas DataFrame with rows removed based on common identifier values.</p>
</dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">arcgis.gis</span> <span class="kn">import</span> <span class="n">GIS</span>
<span class="kn">from</span> <span class="nn">modeling</span> <span class="kn">import</span> <span class="n">Country</span>

<span class="c1"># connect to a Web GIS</span>
<span class="n">gis</span> <span class="o">=</span> <span class="n">GIS</span><span class="p">(</span><span class="s1">&#39;https://path.to.arcgis.enterprise.com/portal&#39;</span><span class="p">,</span>
          <span class="n">username</span><span class="o">=</span><span class="s1">&#39;batman&#39;</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s1">&#39;P3nnyw0rth!&#39;</span><span class="p">)</span>

<span class="c1"># create a country object instance</span>
<span class="n">cntry</span> <span class="o">=</span> <span class="n">Country</span><span class="p">(</span><span class="s1">&#39;USA&#39;</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">gis</span><span class="p">)</span>

<span class="c1"># create an area of interest</span>
<span class="n">aoi_df</span> <span class="o">=</span> <span class="n">cntry</span><span class="o">.</span><span class="n">cbsas</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;Seattle&#39;</span><span class="p">)</span>

<span class="c1"># use this area of interest to get brand locations</span>
<span class="n">brand_df</span> <span class="o">=</span> <span class="n">aoi_df</span><span class="o">.</span><span class="n">mdl</span><span class="o">.</span><span class="n">business</span><span class="o">.</span><span class="n">get_by_name</span><span class="p">(</span><span class="s1">&#39;Ace Hardware&#39;</span><span class="p">)</span>

<span class="c1"># get the top NAICS codes</span>
<span class="n">top_codes</span> <span class="o">=</span> <span class="n">brand_df</span><span class="o">.</span><span class="n">mdl</span><span class="o">.</span><span class="n">business</span><span class="o">.</span><span class="n">get_top_codes</span><span class="p">()</span>

<span class="c1"># truncate the top code retrieved to widen the scope of codes</span>
<span class="c1"># retrieved - a broader category</span>
<span class="n">top_code</span> <span class="o">=</span> <span class="n">top_codes</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">naics_code</span> <span class="o">=</span> <span class="n">top_code</span><span class="p">[:</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span>

<span class="c1"># use this truncated code to retrieve competitors</span>
<span class="n">naics_df</span> <span class="o">=</span> <span class="n">aoi_df</span><span class="o">.</span><span class="n">mdl</span><span class="o">.</span><span class="n">business</span><span class="o">.</span><span class="n">get_by_code</span><span class="p">(</span><span class="n">naics_code</span><span class="p">)</span>

<span class="c1"># now, remove the brand locations from the retrieved dataframe</span>
<span class="c1"># to retain just the competition</span>
<span class="n">comp_df</span> <span class="o">=</span> <span class="n">naics_df</span><span class="o">.</span><span class="n">mdl</span><span class="o">.</span><span class="n">business</span><span class="o">.</span><span class="n">drop_by_id</span><span class="p">(</span><span class="n">brand_df</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="modeling.Business.get_by_code">
<code class="sig-name descname"><span class="pre">get_by_code</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">category_code</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">code_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'NAICS'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name_column</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'CONAME'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id_column</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'LOCNUM'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">local_threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#modeling.Business.get_by_code" title="Permalink to this definition">¶</a></dt>
<dd><p>Search for businesses based on business category code. In North America, this typically is either the NAICS or
SIC code.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>category_code</strong> (<em>[</em><em>&lt;class 'str'&gt;</em><em>, </em><em>&lt;class 'list'&gt;</em><em>]</em>) – Required
Business category code, such as 4568843, input as a string. This does not have to be a
complete code. The tool will search for the category code with a partial code starting from the
beginning.</p></li>
<li><p><strong>code_type</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – Optional
The column in the business listing data to search for the input business code. In the United
States, this is either NAICS or SIC. The default is NAICS.</p></li>
<li><p><strong>name_column</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – Optional
Name of the column with business names to be searched. Default is ‘CONAME’</p></li>
<li><p><strong>id_column</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – Optional
Name of the column with the value uniquely identifying each business location. Default
is ‘LOCNUM’.</p></li>
<li><p><strong>local_threshold</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>) – Optional
Number of locations to consider, albeit only in the study area, to categorize the each
business location as either a major brand, and keep the name, or as a local brand with ‘local_brand’
in a new column.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Spatially Enabled pd.DataFrame</p>
</dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">modeling</span> <span class="kn">import</span> <span class="n">Country</span>

<span class="c1"># start by creating a country object instance</span>
<span class="n">usa</span> <span class="o">=</span> <span class="n">Country</span><span class="p">(</span><span class="s1">&#39;USA&#39;</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="s1">&#39;local&#39;</span><span class="p">)</span>

<span class="c1"># get a geography to work with from locally installed data</span>
<span class="n">aoi_df</span> <span class="o">=</span> <span class="n">usa</span><span class="o">.</span><span class="n">cbsas</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;seattle&#39;</span><span class="p">)</span>

<span class="c1"># get all the businesses for a NAICS code category</span>
<span class="n">naics_big_df</span> <span class="o">=</span> <span class="n">aoi_df</span><span class="o">.</span><span class="n">mdl</span><span class="o">.</span><span class="n">business</span><span class="o">.</span><span class="n">get_by_code</span><span class="p">(</span><span class="mi">4441</span><span class="p">,</span> <span class="n">local_threshold</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="modeling.Business.get_by_name">
<code class="sig-name descname"><span class="pre">get_by_name</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">business_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name_column</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'CONAME'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id_column</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'LOCNUM'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">local_threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#modeling.Business.get_by_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Search business listings for a specific business name string.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>business_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – String business name to search for.</p></li>
<li><p><strong>name_column</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – Optional - Name of the column with business names to be searched. Default is ‘CONAME’</p></li>
<li><p><strong>id_column</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – Optional - Name of the column with the value uniquely identifying each business location. Default
is ‘LOCNUM’.</p></li>
<li><p><strong>local_threshold</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>) – Number of locations to consider, albeit only in the study area, to categorize the each
business location as either a major brand, and keep the name, or as a local brand with ‘local_brand’
in a new column. This enables considering local brands in a market collectively to quantitatively
evaluate the power of “buying local.”</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Spatially Enabled DataFrame of businesses</p>
</dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">modeling</span> <span class="kn">import</span> <span class="n">Country</span>

<span class="c1"># start by creating a country object instance</span>
<span class="n">usa</span> <span class="o">=</span> <span class="n">Country</span><span class="p">(</span><span class="s1">&#39;USA&#39;</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="s1">&#39;local&#39;</span><span class="p">)</span>

<span class="c1"># get a geography to work with from locally installed data</span>
<span class="n">aoi_df</span> <span class="o">=</span> <span class="n">usa</span><span class="o">.</span><span class="n">cbsas</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;seattle&#39;</span><span class="p">)</span>

<span class="c1"># get all Ace Hardware locations in Seattle</span>
<span class="n">comp_df</span> <span class="o">=</span> <span class="n">aoi_df</span><span class="o">.</span><span class="n">mdl</span><span class="o">.</span><span class="n">business</span><span class="o">.</span><span class="n">get_by_name</span><span class="p">(</span><span class="s1">&#39;Ace Hardware&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="modeling.Business.get_competition">
<code class="sig-name descname"><span class="pre">get_competition</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">brand_businesses</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">code_column</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'NAICS'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name_column</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'CONAME'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id_column</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'LOCNUM'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">local_threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#modeling.Business.get_competition" title="Permalink to this definition">¶</a></dt>
<dd><p>Get competitors from previously retrieved business listings.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>brand_businesses</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>) – Previously retrieved business listings.</p></li>
<li><p><strong>name_column</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – Optional - Name of the column with business names to be searched. Default is ‘CONAME’</p></li>
<li><p><strong>code_column</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – Optional - The column in the data to search for business category codes. Default is ‘NAICS’</p></li>
<li><p><strong>id_column</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – Optional - Name of the column with the value uniquely identifying each business location. Default
is ‘LOCNUM’.</p></li>
<li><p><strong>local_threshold</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>) – Number of locations to consider, albeit only in the study area, to categorize the each
business location as either a major brand, and keep the name, or as a local brand with ‘local_brand’
in a new column.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Spatially Enabled DataFrame</p>
</dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">modeling</span> <span class="kn">import</span> <span class="n">Country</span>

<span class="c1"># start by creating a country object instance</span>
<span class="n">usa</span> <span class="o">=</span> <span class="n">Country</span><span class="p">(</span><span class="s1">&#39;USA&#39;</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="s1">&#39;local&#39;</span><span class="p">)</span>

<span class="c1"># get a geography to work with from locally installed data</span>
<span class="n">aoi_df</span> <span class="o">=</span> <span class="n">usa</span><span class="o">.</span><span class="n">cbsas</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;seattle&#39;</span><span class="p">)</span>

<span class="c1"># get all competitors for Ace Hardware in Seattle</span>
<span class="n">comp_df</span> <span class="o">=</span> <span class="n">aoi_df</span><span class="o">.</span><span class="n">mdl</span><span class="o">.</span><span class="n">business</span><span class="o">.</span><span class="n">get_competition</span><span class="p">(</span><span class="s1">&#39;Ace Hardware&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="modeling.Business.get_top_codes">
<code class="sig-name descname"><span class="pre">get_top_codes</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">code_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'NAICS'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.5</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#modeling.Business.get_top_codes" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the industry identifier codes used to identify MOST of the records in a business DataFrame. This is
useful for getting the identifier values to retrieve other business locations to identify competitors.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>code_type</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – Optional string identifying the industry codes being used. Must be either NAICS or SIC. Default
is ‘NAICS’.</p></li>
<li><p><strong>threshold</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) – Optional float determining what percentage to use as threshold cutoff from input records to
select codes from. Default is 0.5. This means the top 50%, or half, of the rows in the DataFrame will
be sampled to return the industry code values identifying the locations.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Pandas Series of code values.</p>
</dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">arcgis.gis</span> <span class="kn">import</span> <span class="n">GIS</span>
<span class="kn">from</span> <span class="nn">modeling</span> <span class="kn">import</span> <span class="n">Country</span>

<span class="c1"># connect to a Web GIS</span>
<span class="n">gis</span> <span class="o">=</span> <span class="n">GIS</span><span class="p">(</span><span class="s1">&#39;https://path.to.arcgis.enterprise.com/portal&#39;</span><span class="p">,</span>
          <span class="n">username</span><span class="o">=</span><span class="s1">&#39;batman&#39;</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s1">&#39;P3nnyw0rth!&#39;</span><span class="p">)</span>

<span class="c1"># create a country object instance</span>
<span class="n">cntry</span> <span class="o">=</span> <span class="n">Country</span><span class="p">(</span><span class="s1">&#39;USA&#39;</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">gis</span><span class="p">)</span>

<span class="c1"># create an area of interest</span>
<span class="n">aoi_df</span> <span class="o">=</span> <span class="n">cntry</span><span class="o">.</span><span class="n">cbsas</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;Minneapolis&#39;</span><span class="p">)</span>

<span class="c1"># use this area of interest to get brand locations</span>
<span class="n">brand_df</span> <span class="o">=</span> <span class="n">aoi_df</span><span class="o">.</span><span class="n">mdl</span><span class="o">.</span><span class="n">business</span><span class="o">.</span><span class="n">get_by_name</span><span class="p">(</span><span class="s1">&#39;Ulta Beauty&#39;</span><span class="p">)</span>

<span class="c1"># get the top NAICS codes</span>
<span class="n">top_codes</span> <span class="o">=</span> <span class="n">brand_df</span><span class="o">.</span><span class="n">mdl</span><span class="o">.</span><span class="n">business</span><span class="o">.</span><span class="n">get_top_codes</span><span class="p">()</span>

<span class="c1"># truncate the top code retrieved to widen the scope of codes</span>
<span class="c1"># retrieved - a broader category</span>
<span class="n">top_code</span> <span class="o">=</span> <span class="n">top_codes</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">naics_code</span> <span class="o">=</span> <span class="n">top_code</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>

<span class="c1"># use this truncated code to retrieve competitors</span>
<span class="n">naics_df</span> <span class="o">=</span> <span class="n">aoi_df</span><span class="o">.</span><span class="n">mdl</span><span class="o">.</span><span class="n">business</span><span class="o">.</span><span class="n">get_by_code</span><span class="p">(</span><span class="n">naics_code</span><span class="p">)</span>

<span class="c1"># now, remove the brand locations from the retrieved dataframe</span>
<span class="c1"># to retain just the competition</span>
<span class="n">comp_df</span> <span class="o">=</span> <span class="n">naics_df</span><span class="o">.</span><span class="n">mdl</span><span class="o">.</span><span class="n">business</span><span class="o">.</span><span class="n">drop_by_id</span><span class="p">(</span><span class="n">brand_df</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="proximity">
<h1>Proximity<a class="headerlink" href="#proximity" title="Permalink to this headline">¶</a></h1>
<dl class="py class">
<dt id="modeling.Proximity">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">modeling.</span></code><code class="sig-name descname"><span class="pre">Proximity</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mdl</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#modeling.Proximity" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides access to proximity calculation functions.</p>
<dl class="py method">
<dt id="modeling.Proximity.get_nearest">
<code class="sig-name descname"><span class="pre">get_nearest</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">destination_dataframe</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">single_row_per_origin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">origin_id_column</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'LOCNUM'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">destination_id_column</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'LOCNUM'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">destination_count</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">4</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">near_prefix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">destination_columns_to_keep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#modeling.Proximity.get_nearest" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a closest destination dataframe using origin and destination Spatially Enabled
Dataframes, but keep each origin and destination still in a discrete row instead
of collapsing to a single row per origin. The main reason to use this is if
needing the geometry for visualization.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>destination_dataframe</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>) – Destination points in one of the supported input formats.</p></li>
<li><p><strong>source</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Path</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Country</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">GIS</span></code>, <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>]) – Either the path to the network dataset, the Country object associated with
the Business Analyst source being used, or a GIS object instance.</p></li>
<li><p><strong>single_row_per_origin</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>]) – Optional - Whether or not to pivot the results to return
only one row for each origin location. Default is True.</p></li>
<li><p><strong>origin_id_column</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – Optional - Column in the origin points Spatially Enabled Dataframe
uniquely identifying each feature. Default is ‘LOCNUM’.</p></li>
<li><p><strong>destination_id_column</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – Column in the destination points Spatially Enabled Dataframe
uniquely identifying each feature</p></li>
<li><p><strong>destination_count</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>]) – Integer number of destinations to search for from every origin
point.</p></li>
<li><p><strong>near_prefix</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – String prefix to prepend onto near column names in the output.</p></li>
<li><p><strong>destination_columns_to_keep</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>]) – List of columns to keep in the output. Commonly, if
businesses, this includes the column with the business names.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Spatially Enabled Dataframe with a row for each origin id, and metrics for
each nth destinations.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="country">
<h1>Country<a class="headerlink" href="#country" title="Permalink to this headline">¶</a></h1>
<p>The country object is the foundational building block for
working with demographic data. This is due to data collection,
aggregation and dissemination methods used in Business Analyst.
Succinctly, this is how the data is organized.</p>
<dl class="py class">
<dt id="modeling.Country">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">modeling.</span></code><code class="sig-name descname"><span class="pre">Country</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">year</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#modeling.Country" title="Permalink to this definition">¶</a></dt>
<dd><p>Country objects are instantiated by providing the three letter country identifier
and optionally also specifying the source. If the source is not explicitly specified
Country will use local resources if the environment is part of an ArcGIS Pro
installation with Business Analyst enabled and local data installed. If this is not
the case, Country will then attempt to use the active GIS object instance if available.
Also, if a GIS object is explicitly passed in, this will be used.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – Three letter country identifier.</p></li>
<li><p><strong>source</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">GIS</span></code>, <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>]) – Optional ‘local’ or a GIS object instance referencing an ArcGIS Enterprise
instance with enrichment configured or ArcGIS Online. If not explicitly
specified, will attempt to use locally installed data with Pro and Business
analyst first. If this is not available, will look for an active GIS. If
no active GIS, a GIS object will need to be explicitly provided with
permissions to perform enrichment.</p></li>
<li><p><strong>year</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>]) – Optional and only applicable if using local data. In cases where models
have been developed against a specific vintage (year) of data, this affords the
ability to enrich data for this specific year to support these models.</p></li>
</ul>
</dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">arcgis.modeling</span> <span class="kn">import</span> <span class="n">Country</span>

<span class="c1"># instantiate a country</span>
<span class="n">usa</span> <span class="o">=</span> <span class="n">Country</span><span class="p">(</span><span class="s1">&#39;USA&#39;</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="s1">&#39;local&#39;</span><span class="p">)</span>

<span class="c1"># get the seattle CBSA as a study area</span>
<span class="n">aoi_df</span> <span class="o">=</span> <span class="n">usa</span><span class="o">.</span><span class="n">cbsas</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;seattle&#39;</span><span class="p">)</span>

<span class="c1"># use the Modeling DataFrame accessor to retrieve the block groups in seattle</span>
<span class="n">bg_df</span> <span class="o">=</span> <span class="n">aoi_df</span><span class="o">.</span><span class="n">mdl</span><span class="o">.</span><span class="n">block_groups</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>

<span class="c1"># get the available enrich variables as as DataFrame</span>
<span class="n">e_vars</span> <span class="o">=</span> <span class="n">usa</span><span class="o">.</span><span class="n">enrich_variables</span>

<span class="c1"># filter the variables to just the current year key variables</span>
<span class="n">key_vars</span> <span class="o">=</span> <span class="n">e_vars</span><span class="p">[(</span><span class="n">e_vars</span><span class="o">.</span><span class="n">data_collection</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;Key&#39;</span><span class="p">))</span> <span class="o">&amp;</span>
                  <span class="p">(</span><span class="n">e_vars</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;CY&#39;</span><span class="p">))]</span>

<span class="c1"># enrich the data through the Modeling DataFrame accessor</span>
<span class="n">e_df</span> <span class="o">=</span> <span class="n">bg_df</span><span class="o">.</span><span class="n">mdl</span><span class="o">.</span><span class="n">enrich</span><span class="p">(</span><span class="n">key_vars</span><span class="p">)</span>
</pre></div>
</div>
<dl class="py method">
<dt id="modeling.Country.add_enrich_aliases">
<code class="sig-name descname"><span class="pre">add_enrich_aliases</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">feature_class</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#modeling.Country.add_enrich_aliases" title="Permalink to this definition">¶</a></dt>
<dd><p>Add human readable aliases to an enriched feature class.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function requires ArcPy to be available in the environment, an environment created on a Windows
operating system with ArcGIS Pro installed and ArcPy installed in the environment.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>feature_class</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Path</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – Path to the enriched feature class.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Path</span></code></a></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Path to feature class with aliases added.</p>
</dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">modeling</span> <span class="kn">import</span> <span class="n">Country</span>

<span class="n">out_fc_pth</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;C:/path/to/geodatabase.gdb/block_groups&#39;</span><span class="p">)</span>

<span class="c1"># create a country object</span>
<span class="n">cntry</span> <span class="o">=</span>  <span class="n">Country</span><span class="p">(</span><span class="s1">&#39;USA&#39;</span><span class="p">)</span>

<span class="c1"># get the current year key variables</span>
<span class="n">evars</span> <span class="o">=</span> <span class="n">cntry</span><span class="o">.</span><span class="n">enrich_variables</span>
<span class="n">key_vars</span> <span class="o">=</span> <span class="n">e_vars</span><span class="p">[</span>
    <span class="p">(</span><span class="n">e_vars</span><span class="o">.</span><span class="n">data_collection</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;Key&#39;</span><span class="p">))</span>
    <span class="o">&amp;</span> <span class="p">(</span><span class="n">e_vars</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;CY&#39;</span><span class="p">))</span>
<span class="p">]</span>

<span class="c1"># get the block groups for the area of interest</span>
<span class="n">bg_df</span> <span class="o">=</span> <span class="n">cntry</span><span class="o">.</span><span class="n">cbsas</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;seattle&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">mdl</span><span class="o">.</span><span class="n">block_groups</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>

<span class="c1"># enrich the block groups with the key variables</span>
<span class="n">enrich_df</span> <span class="o">=</span> <span class="n">bg_df</span><span class="o">.</span><span class="n">mdl</span><span class="o">.</span><span class="n">enrich</span><span class="p">(</span><span class="n">key_vars</span><span class="p">)</span>

<span class="c1"># save to a feature class</span>
<span class="n">enrich_fc</span> <span class="o">=</span> <span class="n">enrich_df</span><span class="o">.</span><span class="n">spatial</span><span class="o">.</span><span class="n">to_featureclass</span><span class="p">(</span><span class="n">out_fc_pth</span><span class="p">)</span>

<span class="c1"># finally, add enrich aliases to the output feature class</span>
<span class="n">cntry</span><span class="o">.</span><span class="n">add_aliases</span><span class="p">(</span><span class="n">enrich_fc</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="modeling.Country.enrich">
<code class="sig-name descname"><span class="pre">enrich</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enrich_variables</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#modeling.Country.enrich" title="Permalink to this definition">¶</a></dt>
<dd><p>Enrich a spatially enabled dataframe using either a enrichment
variables defined using a Python List, NumPy Array or Pandas
Series of enrich names. Also, a filtered enrich variables Pandas
DataFrame can also be used.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>) – Spatially Enabled DataFrame with geography_levels to be
enriched.</p></li>
<li><p><strong>enrich_variables</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">array</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>]) – Optional iterable of enrich variables to use for
enriching data. Filtered output from
Country.enrich_variables can also be used.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Spatially Enabled DataFrame with enriched data added.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="modeling.Country.enrich_variables">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">enrich_variables</span></code><a class="headerlink" href="#modeling.Country.enrich_variables" title="Permalink to this definition">¶</a></dt>
<dd><p>DataFrame of all the available enrichment variables.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">arcgis</span> <span class="kn">import</span> <span class="n">GIS</span>
<span class="kn">from</span> <span class="nn">modeling</span> <span class="kn">import</span> <span class="n">Country</span>

<span class="c1"># connect to an Enterprise GIS instance with Business Analyst installed</span>
<span class="n">gis</span> <span class="o">=</span> <span class="n">GIS</span><span class="p">(</span><span class="s1">&#39;https://mydomain.com/portal&#39;</span><span class="p">,</span> <span class="n">username</span><span class="o">=</span><span class="s1">&#39;geowizard&#39;</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s1">&#39;Y3ll0wBr!ck$&#39;</span><span class="p">)</span>

<span class="c1"># create a country to work with</span>
<span class="n">cntry</span> <span class="o">=</span> <span class="n">Country</span><span class="p">(</span><span class="s1">&#39;USA&#39;</span><span class="p">)</span>

<span class="c1"># get the available enrich variables as as DataFrame</span>
<span class="n">e_vars</span> <span class="o">=</span> <span class="n">usa</span><span class="o">.</span><span class="n">enrich_variables</span>

<span class="c1"># filter the variables to just the current year key variables</span>
<span class="n">key_vars</span> <span class="o">=</span> <span class="n">e_vars</span><span class="p">[(</span><span class="n">e_vars</span><span class="o">.</span><span class="n">data_collection</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;Key&#39;</span><span class="p">))</span> <span class="o">&amp;</span>
                  <span class="p">(</span><span class="n">e_vars</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;CY&#39;</span><span class="p">))]</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">key_vars</span></code> table retrieved using the code sample above will look similar to the following.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 2%" />
<col style="width: 6%" />
<col style="width: 19%" />
<col style="width: 10%" />
<col style="width: 12%" />
<col style="width: 12%" />
<col style="width: 28%" />
<col style="width: 5%" />
<col style="width: 5%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"></th>
<th class="head"><p>name</p></th>
<th class="head"><p>alias</p></th>
<th class="head"><p>data_collection</p></th>
<th class="head"><p>enrich_name</p></th>
<th class="head"><p>enrich_field_name</p></th>
<th class="head"><p>description</p></th>
<th class="head"><p>vintage</p></th>
<th class="head"><p>units</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0</p></td>
<td><p>TOTPOP_CY</p></td>
<td><p>2020 Total Population</p></td>
<td><p>KeyUSFacts</p></td>
<td><p>KeyUSFacts.TOTPOP_CY</p></td>
<td><p>KeyUSFacts_TOTPOP_CY</p></td>
<td><p>2020 Total Population (Esri)</p></td>
<td><p>2020</p></td>
<td><p>count</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>GQPOP_CY</p></td>
<td><p>2020 Group Quarters Population</p></td>
<td><p>KeyUSFacts</p></td>
<td><p>KeyUSFacts.GQPOP_CY</p></td>
<td><p>KeyUSFacts_GQPOP_CY</p></td>
<td><p>2020 Group Quarters Population (Esri)</p></td>
<td><p>2020</p></td>
<td><p>count</p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>DIVINDX_CY</p></td>
<td><p>2020 Diversity Index</p></td>
<td><p>KeyUSFacts</p></td>
<td><p>KeyUSFacts.DIVINDX_CY</p></td>
<td><p>KeyUSFacts_DIVINDX_CY</p></td>
<td><p>2020 Diversity Index (Esri)</p></td>
<td><p>2020</p></td>
<td><p>count</p></td>
</tr>
<tr class="row-odd"><td><p>3</p></td>
<td><p>TOTHH_CY</p></td>
<td><p>2020 Total Households</p></td>
<td><p>KeyUSFacts</p></td>
<td><p>KeyUSFacts.TOTHH_CY</p></td>
<td><p>KeyUSFacts_TOTHH_CY</p></td>
<td><p>2020 Total Households (Esri)</p></td>
<td><p>2020</p></td>
<td><p>count</p></td>
</tr>
<tr class="row-even"><td><p>4</p></td>
<td><p>AVGHHSZ_CY</p></td>
<td><p>2020 Average Household Size</p></td>
<td><p>KeyUSFacts</p></td>
<td><p>KeyUSFacts.AVGHHSZ_CY</p></td>
<td><p>KeyUSFacts_AVGHHSZ_CY</p></td>
<td><p>2020 Average Household Size (Esri)</p></td>
<td><p>2020</p></td>
<td><p>count</p></td>
</tr>
<tr class="row-odd"><td><p>5</p></td>
<td><p>MEDHINC_CY</p></td>
<td><p>2020 Median Household Income</p></td>
<td><p>KeyUSFacts</p></td>
<td><p>KeyUSFacts.MEDHINC_CY</p></td>
<td><p>KeyUSFacts_MEDHINC_CY</p></td>
<td><p>2020 Median Household Income (Esri)</p></td>
<td><p>2020</p></td>
<td><p>currency</p></td>
</tr>
<tr class="row-even"><td><p>6</p></td>
<td><p>AVGHINC_CY</p></td>
<td><p>2020 Average Household Income</p></td>
<td><p>KeyUSFacts</p></td>
<td><p>KeyUSFacts.AVGHINC_CY</p></td>
<td><p>KeyUSFacts_AVGHINC_CY</p></td>
<td><p>2020 Average Household Income (Esri)</p></td>
<td><p>2020</p></td>
<td><p>currency</p></td>
</tr>
<tr class="row-odd"><td><p>7</p></td>
<td><p>PCI_CY</p></td>
<td><p>2020 Per Capita Income</p></td>
<td><p>KeyUSFacts</p></td>
<td><p>KeyUSFacts.PCI_CY</p></td>
<td><p>KeyUSFacts_PCI_CY</p></td>
<td><p>2020 Per Capita Income (Esri)</p></td>
<td><p>2020</p></td>
<td><p>currency</p></td>
</tr>
<tr class="row-even"><td><p>8</p></td>
<td><p>TOTHU_CY</p></td>
<td><p>2020 Total Housing Units</p></td>
<td><p>KeyUSFacts</p></td>
<td><p>KeyUSFacts.TOTHU_CY</p></td>
<td><p>KeyUSFacts_TOTHU_CY</p></td>
<td><p>2020 Total Housing Units (Esri)</p></td>
<td><p>2020</p></td>
<td><p>count</p></td>
</tr>
<tr class="row-odd"><td><p>9</p></td>
<td><p>OWNER_CY</p></td>
<td><p>2020 Owner Occupied HUs</p></td>
<td><p>KeyUSFacts</p></td>
<td><p>KeyUSFacts.OWNER_CY</p></td>
<td><p>KeyUSFacts_OWNER_CY</p></td>
<td><p>2020 Owner Occupied Housing Units (Esri)</p></td>
<td><p>2020</p></td>
<td><p>count</p></td>
</tr>
<tr class="row-even"><td><p>10</p></td>
<td><p>RENTER_CY</p></td>
<td><p>2020 Renter Occupied HUs</p></td>
<td><p>KeyUSFacts</p></td>
<td><p>KeyUSFacts.RENTER_CY</p></td>
<td><p>KeyUSFacts_RENTER_CY</p></td>
<td><p>2020 Renter Occupied Housing Units (Esri)</p></td>
<td><p>2020</p></td>
<td><p>count</p></td>
</tr>
<tr class="row-odd"><td><p>11</p></td>
<td><p>VACANT_CY</p></td>
<td><p>2020 Vacant Housing Units</p></td>
<td><p>KeyUSFacts</p></td>
<td><p>KeyUSFacts.VACANT_CY</p></td>
<td><p>KeyUSFacts_VACANT_CY</p></td>
<td><p>2020 Vacant Housing Units (Esri)</p></td>
<td><p>2020</p></td>
<td><p>count</p></td>
</tr>
<tr class="row-even"><td><p>12</p></td>
<td><p>MEDVAL_CY</p></td>
<td><p>2020 Median Home Value</p></td>
<td><p>KeyUSFacts</p></td>
<td><p>KeyUSFacts.MEDVAL_CY</p></td>
<td><p>KeyUSFacts_MEDVAL_CY</p></td>
<td><p>2020 Median Home Value (Esri)</p></td>
<td><p>2020</p></td>
<td><p>currency</p></td>
</tr>
<tr class="row-odd"><td><p>13</p></td>
<td><p>AVGVAL_CY</p></td>
<td><p>2020 Average Home Value</p></td>
<td><p>KeyUSFacts</p></td>
<td><p>KeyUSFacts.AVGVAL_CY</p></td>
<td><p>KeyUSFacts_AVGVAL_CY</p></td>
<td><p>2020 Average Home Value (Esri)</p></td>
<td><p>2020</p></td>
<td><p>currency</p></td>
</tr>
<tr class="row-even"><td><p>14</p></td>
<td><p>POPGRW10CY</p></td>
<td><p>2010-2020 Growth Rate: Population</p></td>
<td><p>KeyUSFacts</p></td>
<td><p>KeyUSFacts.POPGRW10CY</p></td>
<td><p>KeyUSFacts_POPGRW10CY</p></td>
<td><p>2010-2020 Population: Annual Growth Rate (Esri)</p></td>
<td><p>2020</p></td>
<td><p>pct</p></td>
</tr>
<tr class="row-odd"><td><p>15</p></td>
<td><p>HHGRW10CY</p></td>
<td><p>2010-2020 Growth Rate: Households</p></td>
<td><p>KeyUSFacts</p></td>
<td><p>KeyUSFacts.HHGRW10CY</p></td>
<td><p>KeyUSFacts_HHGRW10CY</p></td>
<td><p>2010-2020 Households: Annual Growth Rate (Esri)</p></td>
<td><p>2020</p></td>
<td><p>pct</p></td>
</tr>
<tr class="row-even"><td><p>16</p></td>
<td><p>FAMGRW10CY</p></td>
<td><p>2010-2020 Growth Rate: Families</p></td>
<td><p>KeyUSFacts</p></td>
<td><p>KeyUSFacts.FAMGRW10CY</p></td>
<td><p>KeyUSFacts_FAMGRW10CY</p></td>
<td><p>2010-2020 Families: Annual Growth Rate (Esri)</p></td>
<td><p>2020</p></td>
<td><p>pct</p></td>
</tr>
<tr class="row-odd"><td><p>17</p></td>
<td><p>DPOP_CY</p></td>
<td><p>2020 Total Daytime Population</p></td>
<td><p>KeyUSFacts</p></td>
<td><p>KeyUSFacts.DPOP_CY</p></td>
<td><p>KeyUSFacts_DPOP_CY</p></td>
<td><p>2020 Total Daytime Population (Esri)</p></td>
<td><p>2020</p></td>
<td><p>count</p></td>
</tr>
<tr class="row-even"><td><p>18</p></td>
<td><p>DPOPWRK_CY</p></td>
<td><p>2020 Daytime Pop: Workers</p></td>
<td><p>KeyUSFacts</p></td>
<td><p>KeyUSFacts.DPOPWRK_CY</p></td>
<td><p>KeyUSFacts_DPOPWRK_CY</p></td>
<td><p>2020 Daytime Population: Workers (Esri)</p></td>
<td><p>2020</p></td>
<td><p>count</p></td>
</tr>
<tr class="row-odd"><td><p>19</p></td>
<td><p>DPOPRES_CY</p></td>
<td><p>2020 Daytime Pop: Residents</p></td>
<td><p>KeyUSFacts</p></td>
<td><p>KeyUSFacts.DPOPRES_CY</p></td>
<td><p>KeyUSFacts_DPOPRES_CY</p></td>
<td><p>2020 Daytime Population: Residents (Esri)</p></td>
<td><p>2020</p></td>
<td><p>count</p></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="py method">
<dt id="modeling.Country.geography_levels">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">geography_levels</span></code><a class="headerlink" href="#modeling.Country.geography_levels" title="Permalink to this definition">¶</a></dt>
<dd><p>DataFrame of available geography levels.</p>
</dd></dl>

<dl class="py method">
<dt id="modeling.Country.get_enrich_variables_dataframe_from_variable_list">
<code class="sig-name descname"><span class="pre">get_enrich_variables_dataframe_from_variable_list</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">enrich_variables</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">drop_duplicates</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#modeling.Country.get_enrich_variables_dataframe_from_variable_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a dataframe of enrich variables associated with the list of variables
passed in. This is especially useful when needing aliases (<em>human readable
names</em>), or are interested in enriching more data using previously enriched
data as a template.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>enrich_variables</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code>]) – Iterable (normally a list) of variables correlating to
enrichment variables. These variable names can be simply the name, the
name prefixed by the collection separated by a dot, or the output from
enrichment in ArcGIS Pro with the field name modified to fit field naming
and length constraints.</p></li>
<li><p><strong>drop_duplicates</strong> – Optional boolean (default True) indicating whether to drop
duplicates. Since the same variables appear in multiple data collections,
multiple instances of the same variable can be found. Dropping duplicates
removes redundant matches.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Pandas DataFrame of enrich variables with the different available aliases.</p>
</dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>

<span class="kn">import</span> <span class="nn">arcpy</span>
<span class="kn">from</span> <span class="nn">modeling</span> <span class="kn">import</span> <span class="n">Country</span>

<span class="c1"># path to previously enriched data</span>
<span class="n">enriched_fc_pth</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;C:/path/to/geodatabase.gdb/enriched_data&#39;</span><span class="p">)</span>
<span class="n">new_fc_pth</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;C:/path/to/geodatabase.gdb/block_groups_pdx&#39;</span><span class="p">)</span>

<span class="c1"># get a list of column names from previously enriched data</span>
<span class="n">attr_lst</span> <span class="o">=</span> <span class="p">[</span><span class="n">c</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">arcpy</span><span class="o">.</span><span class="n">ListFields</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">enriched_fc_pth</span><span class="p">))</span>

<span class="c1"># get a country to work in</span>
<span class="n">cntry</span> <span class="o">=</span> <span class="n">Country</span><span class="p">(</span><span class="s1">&#39;USA&#39;</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="s1">&#39;local&#39;</span><span class="p">)</span>

<span class="c1"># get dataframe of variables used for previously enriched data</span>
<span class="n">enrich_vars</span> <span class="o">=</span> <span class="n">cntry</span><span class="o">.</span><span class="n">get_enrich_variables_dataframe_from_variable_list</span><span class="p">(</span><span class="n">attr_lst</span><span class="p">)</span>

<span class="c1"># enrich block groups in new area of interest using the same variables</span>
<span class="n">enrich_df</span> <span class="o">=</span> <span class="n">cntry</span><span class="o">.</span><span class="n">cbsas</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;portland-vancouver&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">mdl</span><span class="o">.</span><span class="n">block_groups</span><span class="o">.</span><span class="n">get</span><span class="p">()</span><span class="o">.</span><span class="n">mdl</span><span class="o">.</span><span class="n">enrich</span><span class="p">(</span><span class="n">enrich_vars</span><span class="p">)</span>

<span class="c1"># save the new data and add aliases</span>
<span class="n">enrich_df</span><span class="o">.</span><span class="n">spatial</span><span class="o">.</span><span class="n">to_featureclass</span><span class="p">(</span><span class="n">new_fc_pth</span><span class="p">)</span>
<span class="n">cntry</span><span class="o">.</span><span class="n">add_enrich_aliases</span><span class="p">(</span><span class="n">new_fc_pth</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="modeling.Country.level">
<code class="sig-name descname"><span class="pre">level</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">geography_index</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#modeling.Country.level" title="Permalink to this definition">¶</a></dt>
<dd><p>Get an available <code class="docutils literal notranslate"><span class="pre">geography_level</span></code> in the country.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>geography_index</strong> (<em>(</em><em>&lt;class 'str'&gt;</em><em>, </em><em>&lt;class 'int'&gt;</em><em>)</em>) – Either the geographic_level geo_name or the
index of the geography_level level. This can be discovered
using the <code class="docutils literal notranslate"><span class="pre">Country.geography_levels</span></code> method.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Spatially Enabled DataFrame of the requested geography_level with
the Modeling accessor properties initialized.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="modeling.Country.levels">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">levels</span></code><a class="headerlink" href="#modeling.Country.levels" title="Permalink to this definition">¶</a></dt>
<dd><p>Dataframe of available geography levels. (Alias of geography_levels.)</p>
</dd></dl>

<dl class="py method">
<dt id="modeling.Country.verify_can_enrich">
<code class="sig-name descname"><span class="pre">verify_can_enrich</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#modeling.Country.verify_can_enrich" title="Permalink to this definition">¶</a></dt>
<dd><p>If the country enrich instance can enrich based on the permissions. Only relevant if source is a GIS
instance.</p>
</dd></dl>

<dl class="py method">
<dt id="modeling.Country.verify_can_perform_network_analysis">
<code class="sig-name descname"><span class="pre">verify_can_perform_network_analysis</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">network_function</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#modeling.Country.verify_can_perform_network_analysis" title="Permalink to this definition">¶</a></dt>
<dd><p>If the country enrich instance can perform transportation network analysis based on permissions. Only
relevant if the source is a GIS instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>network_function</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – Optional string describing specific network function to check for. Valid values include
‘closestfacility’, ‘locationallocation’, ‘optimizedrouting’, ‘origindestinationcostmatrix’, ‘routing’,
‘servicearea’, or ‘vehiclerouting’.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Boolean indicating if the country instance, based on permissions, has network analysis privileges.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="modeling.utils.html" class="btn btn-neutral float-right" title="modeling.utils module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="install.html" class="btn btn-neutral float-left" title="Demographic Modeling - Installation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2020, Joel McCune.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>